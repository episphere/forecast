<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">

    <script src="src/lib/d3/d3.min.js"></script>
    <!-- <script src="src/lib/taffydb/taffy.js"></script> -->
    <script src="src/lib/gaussian.js"></script>
    <!-- <script src="src/forecast.js"></script> -->

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
      rel="stylesheet" 
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
      crossorigin="anonymous"> -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>


<body>
  <div class="top">
    <div class="top-element"><h1>epiForecast<sup style="font-size: .5em; color: red;">WIP</sup></h1></div>
    <span class="top-element"> [<a href="https://github.com/episphere/forecast">code</a>] </span>
  </div>

  <div class="file-select-block">
    <div class="collapsible">
      Data Configuration
      <span class="collapsible-arrow material-icons">arrow_drop_down</span>
    </div>
    <div class="content">
      Upload your data file here. The file must be in CSV or JSON format. The data should consist of a series of rows with at least one time field (with values which are either valid dates or integers) and at least one value field (with values which are numbers). The data can also have a group field. Within each group, the time values should be evenly spaced. 
      <div class="file-select" >
        <label for="data-select">Choose a data file:</label>
        <input type="file" id="data-select" style="display: none;" />
        <input type="button" value="Browse..." onclick="document.getElementById('data-select').click();" />
        <label id="data-select-label" class="file-select-label" for="data-select">No file selected</label>
      </div>
      <div id="field-selects">
        <label for="tfield-select">Time Field:</label>
        <select class="field-select" id="tfield-select" /></select>
        <label for="vfield-select">Value Field:</label>
        <select class="field-select" id="vfield-select"></select>
        <label for="gfield-select">Group Field:</label>
        <select class="field-select" id="sfield-select"></select>
      </div>

      <div style="margin-top: 5px">
        <input type="checkbox" id="tfield-toggle" checked>
        <label> Time Field is Date</label><br>
      </div>
     
      
      <button  id="run-button" type="button">Run</button>
    </div>
  </div>

<!--   
  <div class="file-select" style="visibility: hidden;">
      <input type="file" id="file">
     
      <label for="time-field">Time Field: </label>
      <select name="time-field" id="time-field"> </select>

      <label for="value-field">Value Field: </label>
      <select name="value-field" id="value-field"> </select>

      <label for="value-field">Strat. Field: </label>
      <select name="value-field" id="value-field"> </select>
    
  </div> -->



  <div class="plots">

    <div class="plot-row">
      <div class="plot">
        <div id="plot_ts" ></div>
        <div class="time-control"> 
          <div id="time-slider-container" class="slidecontainer"> </div>
        </div>
      </div><div class="plot"><div id="plot_alt"></div></div>
    </div>

    <div class="plot-row">
        <div class="plot"><div id="plot_phase"></div></div>

        <div class="params">
          <div>
            <label for="nn">Horizon:</label>
            <input id="param-input-tp" type="number" id="nn" value=16> 
          </div>

            <div>
              <label for="E">Embedding:</label>
              <input id="param-input-E" type="number" value=6>
            </div>

            <div>
              <label for="param-input-nn">Neighbors:</label>
              <input id="param-input-nn" type="number" value=8>
            </div>

            <div>
              <label for="param-input-theta">Theta:</label>
              <input id="param-input-theta" type="number" value=1.0 step=0.1> 
            </div>

            <button id="param-run" type="button">Run</button>

            <div>
              <label for="param-kernel-width">Kernel Width:</label>
              <input id="param-kernel-width" type="number" value=0.1 step="0.1">
            </div>

            <div>
              <label for="weight-coloring-toggle"> Weight Coloring</label>
              <input type="checkbox" id="weight-coloring-toggle" checked>
            </div>

            <div>
              <label for="show-dates-toggle">Show Dates</label>
              <input type="checkbox" id="show-dates-toggle">
            </div>
        </div>

        <div class="plot"> <div id="plot_weight"></div></div>
        <!-- <div style="clear:both;"></div> -->
      </div>
    </div>

    <div class="params" style="visibility: hidden;">
      <div  class="param-input">
        <label for="E">Embedding</label></br>
        <input id="param-input-E" type="number" id="E" value=6>
      </div>

      <div  class="param-input">
        <label for="nn">Neighbors</label></br>
        <input id="param-input-nn" type="number" id="nn" value=8>
      </div>

      <div class="param-input">
        <label for="theta">Theta</label></br>
        <input id="param-input-theta" type="number" id="theta" value=1.0>
      </div>
    </div>

  </div>
  <!-- <div class="data">
    <label for="data">Choose data:</label>
    <input type="file" id="data" name="data" accept=".csv">
  </div>
  -->

  <!--<div id="controls-top"></div>
  
  <div style="display: flex;">
    <div id="test_tl" style="position: relative"></div>
    <div id="test_tr" style="position: relative"></div>
  </div>

  <div style="display: flex;">
    <div id="test_bl" style="position: relative"></div>
    <div id="test_br" style="position: relative"></div>
  </div>

  <div id="controls_bottom"></div>-->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
    crossorigin="anonymous"></script>
</body>

<!-- <script src="src/main_test.js" type="module"></script> -->
<script src="src/main2.js" type="module"></script>
</html>